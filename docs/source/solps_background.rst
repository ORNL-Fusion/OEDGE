Importing a SOLPS-ITER background
=================================

It is possible to perform a DIVIMP simulations using a background generated by the 2D fluid code SOLPS-ITER. When setting up the DIVIMP input file, perform the following steps.

  - Copy the :code:`fort.31` file from the "run" folder of the SOLPS-ITER simulation to the :code:`shots` folder

  - Rename file without the extension, up to you what to call it

     - E.g.,  shotnumber_timeslice_mesh-number_run_solps_solution

  - Within the DIVIMP input file include the following input options (:ref:`F05`, :ref:`F06`, :ref:`F17`, :ref:`F18`):

    .. code-block::

      '+F05 SONNET-Number of Fluids in B2 Background Plasma File' 7  # D+C
      '+F06 Read Aux. Background Input File 0=off 1=on          ' 0
      '*F17 SOLPS Vb interpolation option 0-boundary 1-centered ' 1
      '*F18 SOLPS fort.31 file format specifier 0=4.3+ 1=ITER   ' 2
    
  - :ref:`F05`

     - represents the number of fluids in the SOLPS background fort.31 plasma file

     - will likely be 7 for all D+C SOLPS-ITER simulations

     - will be higher if extra species are included

  - :ref:`F18`

     - set to 1 or 2 for all SOLPS-ITER simulations

     - if =1, all parallel velocity values are multiplied by -1

     - if =2, no modification is made

     - this may need to be changed depending on X-pt. up vs. X-pt. down DIVIMP expects the velocity to be negative at the low index or S=0 target at the start of the ring and positive at the high index target
